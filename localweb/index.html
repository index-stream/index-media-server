<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index Media Server</title>
    <link rel="stylesheet" href="./styles/main.css">
    <meta name="theme-color" content="#0f172a">
    <meta name="description" content="Local media server">
    <script type="module" src="./scripts/main.js"></script>
</head>
<body class="bg-slate-900 text-white min-h-screen">
    <!-- Main App Container -->
    <div id="app" class="min-h-screen">
        <!-- Initial Page -->
        <div id="initial-page" class="flex flex-col items-center justify-center min-h-screen p-8">
            <div class="max-w-4xl mx-auto text-center">
                <!-- Loading Content -->
            </div>
        </div>
        <!-- Setup Page -->
        <div id="setup-page" class="hidden flex flex-col items-center justify-center min-h-screen p-8">
            <div class="w-full max-w-4xl mx-auto text-center">
                <!-- Initial Setup Content -->
                <div id="setup-initial-content">
                    <h1 class="text-6xl font-bold mb-6 bg-gradient-to-r from-blue-500 to-green-500 bg-clip-text text-transparent">
                        Index Media Server
                    </h1>
                    <p class="text-xl text-gray-300 mb-8 leading-relaxed">
                        Ready to setup your media server and start streaming video content?
                    </p>
                    <button id="setup-btn" class="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-4 px-8 rounded-lg text-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                        Let's Get Started
                    </button>
                </div>

                <!-- Step 1: Media Server Name (Hidden Initially) -->
                <div id="setup-step-1" class="hidden w-full max-w-md mx-auto">
                    <h2 class="text-3xl font-bold mb-6 text-white">Media Server</h2>
                    <p class="text-lg text-gray-300 mb-8">Give your media server a name.</p>
                    
                    <form id="server-name-form" class="space-y-6">
                        <div class="text-left">
                            <label for="server-name" class="block text-sm font-medium text-gray-300 mb-2">Server Name</label>
                            <input type="text" id="server-name" name="server-name" value="Index Media Server" 
                                   class="w-full px-4 py-3 bg-gray-700 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <p class="text-gray-400 text-sm mt-2">This name will be visible to other devices on your network</p>
                        </div>

                        <div class="pt-4">
                            <button type="submit" id="continue-to-profiles-btn" class="w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                                Continue
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Step 2: Profile Creation (Hidden Initially) -->
                <div id="setup-step-2" class="hidden w-full max-w-md mx-auto">
                    <h2 class="text-3xl font-bold mb-6 text-white">Create Your Profiles</h2>
                    <p class="text-lg text-gray-300 mb-8">Set up profiles to personalize your media experience.</p>
                    
                    <!-- Profiles List -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-300 mb-3">Your Profiles</label>
                        <div id="profiles-list" class="space-y-3 mb-4 min-h-[120px] border border-gray-500 rounded-lg p-4 bg-gray-700">
                            <p class="text-gray-500 text-sm text-center py-8">No profiles added yet</p>
                        </div>
                        
                        <!-- Add Profile Button -->
                        <button type="button" id="add-profile-btn" class="w-full bg-gray-600 hover:bg-gray-500 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 border-2 border-dashed border-gray-400 hover:border-gray-300">
                            <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            Add Profile
                        </button>
                    </div>


                    <!-- Continue Button -->
                    <div class="pt-6">
                        <div class="flex space-x-4">
                            <button type="button" id="back-to-server-name-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200">
                                Back
                            </button>
                            <button type="button" id="continue-to-password-btn" class="flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl" disabled>
                                Continue
                            </button>
                        </div>
                        <p id="profiles-error" class="text-gray-300 text-sm mt-4 text-center hidden">Please add at least one profile to continue.</p>
                    </div>
                </div>

                <!-- Step 3: Password Setup (Hidden Initially) -->
                <div id="setup-step-3" class="hidden w-full max-w-md mx-auto">
                    <h2 class="text-3xl font-bold mb-6 text-white">Secure Your Server</h2>
                    <p class="text-lg text-gray-300 mb-8">Set up a password to protect your media server from unauthorized access.</p>
                    
                    <form id="password-form" class="space-y-6">
                        <div class="text-left">
                            <label for="server-password" class="block text-sm font-medium text-gray-300 mb-2">Server Password</label>
                            <input type="password" id="server-password" name="server-password" placeholder="Enter a secure password" 
                                   class="w-full px-4 py-3 bg-gray-700 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>

                        <div class="text-left">
                            <label for="confirm-password" class="block text-sm font-medium text-gray-300 mb-2">Confirm Password</label>
                            <input type="password" id="confirm-password" name="confirm-password" placeholder="Confirm your password" 
                                   class="w-full px-4 py-3 bg-gray-700 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>

                        <!-- Password Error Message -->
                        <div id="password-error" class="text-red-400 text-sm text-center hidden">Passwords do not match. Please try again.</div>

                        <div class="flex space-x-4 pt-4">
                            <button type="button" id="back-to-profiles-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200">
                                Back
                            </button>
                            <button type="submit" id="continue-to-index-name-btn" class="flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                Continue
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Step 4: Index Name (Hidden Initially) -->
                <div id="setup-step-4" class="hidden w-full max-w-md mx-auto">
                    <h2 class="text-3xl font-bold mb-6 text-white">Create a Local Media Index</h2>
                    
                    <form id="name-form" class="space-y-6">
                        <div class="text-left">
                            <label for="index-name" class="block text-sm font-medium text-gray-300 mb-2">Index Name</label>
                            <input type="text" id="index-name" name="index-name" value="Home" 
                                   class="w-full px-4 py-3 bg-gray-700 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>

                        <div class="text-left">
                            <label class="block text-sm font-medium text-gray-300 mb-3">Media Type</label>
                            <div class="grid grid-cols-3 gap-4 mb-4">
                                <!-- Videos -->
                                <div class="media-type-option" data-type="videos">
                                    <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl flex items-center justify-center border-2 border-transparent hover:border-white  hover:from-blue-500 hover:to-blue-600 cursor-pointer bg-origin-border hover:scale-105">
                                        <img src="./images/icon_movie.svg" alt="Videos" class="w-10 h-10">
                                    </div>
                                    <p class="text-sm text-gray-300 mt-2 text-center">Videos</p>
                                </div>
                                <!-- Audio -->
                                <div class="media-type-option" data-type="audio">
                                    <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-green-600 to-green-700 rounded-xl flex items-center justify-center border-2 border-transparent hover:border-white hover:from-green-500 hover:to-green-600 cursor-pointer bg-origin-border hover:scale-105">
                                        <img src="./images/icon_music.svg" alt="Music Icon" class="w-10 h-10">
                                    </div>
                                    <p class="text-sm text-gray-300 mt-2 text-center">Audio</p>
                                </div>
                                <!-- Photos -->
                                <div class="media-type-option" data-type="photos">
                                    <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl flex items-center justify-center border-2 border-transparent hover:border-white hover:from-purple-500 hover:to-purple-600 cursor-pointer bg-origin-border hover:scale-105">
                                        <img src="./images/icon_image.svg" alt="Photos" class="w-10 h-10">
                                    </div>
                                    <p class="text-sm text-gray-300 mt-2 text-center">Photos</p>
                                </div>
                            </div>
                        </div>

                        <div class="flex space-x-4 pt-4">
                            <button type="button" id="back-to-password-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200">
                                Back
                            </button>
                            <button type="button" id="skip-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200">
                                Skip
                            </button>
                            <button type="submit" id="continue-to-icon-btn" class="flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                                Continue
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Step 5: Icon Selection (Hidden Initially) -->
                <div id="setup-step-5" class="hidden w-full max-w-md mx-auto">
                    <h2 class="text-3xl font-bold mb-6 text-white">Choose an Icon</h2>
                    <p class="text-lg text-gray-300 mb-8">Select an icon for your "<span id="index-name-display">Home</span>" index.</p>
                    
                    <form id="icon-form" class="space-y-6">
                        <div class="text-left">
                            <label class="block text-sm font-medium text-gray-300 mb-3">Choose Icon</label>
                            <div class="grid grid-cols-5 gap-4 mb-4">
                                <!-- Default Icons -->
                                <div class="icon-option" data-icon="home">
                                    <div class="w-16 h-16 mx-auto bg-gradient-to-r from-slate-600 to-slate-700 rounded-xl flex items-center justify-center cursor-pointer hover:from-slate-500 hover:to-slate-600 transition-all duration-200 border-2 border-transparent hover:border-white bg-origin-border hover:scale-105">
                                        <img src="./images/icon_home.svg" alt="Home Icon" class="w-8 h-8">
                                    </div>
                                </div>
                                <div class="icon-option" data-icon="movie">
                                    <div class="w-16 h-16 mx-auto bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl flex items-center justify-center cursor-pointer hover:from-blue-500 hover:to-blue-600 transition-all duration-200 border-2 border-transparent hover:border-white bg-origin-border hover:scale-105">
                                        <img src="./images/icon_movie.svg" alt="Movie Icon" class="w-8 h-8">
                                    </div>
                                </div>
                                <div class="icon-option" data-icon="music">
                                    <div class="w-16 h-16 mx-auto bg-gradient-to-r from-green-600 to-green-700 rounded-xl flex items-center justify-center cursor-pointer hover:from-green-500 hover:to-green-600 transition-all duration-200 border-2 border-transparent hover:border-white bg-origin-border hover:scale-105">
                                        <img src="./images/icon_music.svg" alt="Music Icon" class="w-8 h-8">
                                    </div>
                                </div>
                                <div class="icon-option" data-icon="image">
                                    <div class="w-16 h-16 mx-auto bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl flex items-center justify-center cursor-pointer hover:from-purple-500 hover:to-purple-600 transition-all duration-200 border-2 border-transparent hover:border-white bg-origin-border hover:scale-105">
                                        <img src="./images/icon_image.svg" alt="Image Icon" class="w-8 h-8">
                                    </div>
                                </div>
                                
                                <!-- Custom Upload Option -->
                                <div class="icon-option" data-icon="custom">
                                    <div class="w-16 h-16 mx-auto rounded-lg border-2 border-dashed border-gray-400 hover:border-white cursor-pointer flex items-center justify-center bg-gray-700 hover:bg-gray-600 transition-colors hover:scale-105 overflow-hidden">
                                        <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                                        </svg>
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2 text-center">Upload</p>
                                </div>
                            </div>
                            
                            <!-- Hidden file input -->
                            <input type="file" id="custom-icon" name="custom-icon" accept="image/*" class="hidden">
                        </div>

                        <div class="flex space-x-4 pt-4">
                            <button type="button" id="back-to-name-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200">
                                Back
                            </button>
                            <button type="submit" id="continue-to-folders-btn" class="flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                                Continue
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Step 6: Folder Selection (Hidden Initially) -->
                <div id="setup-step-6" class="hidden w-fit max-w-2xl mx-auto">
                    <h2 class="text-3xl font-bold mb-6 text-white">Select Folders</h2>
                    <p class="text-lg text-gray-300 mb-8">Choose which folders your "<span id="index-name-display-step6">Home</span>" index can read from.</p>
                    
                    <form id="folders-form" class="space-y-6">
                        <div class="text-left">
                            <label class="block text-sm font-medium text-gray-300 mb-3">Selected Folders</label>
                            
                            <!-- Selected Folders List -->
                            <div id="selected-folders-list" class="space-y-2 mb-4 min-h-[100px] border border-gray-500 rounded-lg p-4 bg-gray-700">
                                <p class="text-gray-500 text-sm text-center py-8">No folders selected yet</p>
                            </div>
                            
                            <!-- Add Folders Button -->
                            <button type="button" id="add-folders-btn" class="w-full bg-gray-600 hover:bg-gray-500 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 border-2 border-dashed border-gray-400 hover:border-gray-300">
                                <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                </svg>
                                Add Folders
                            </button>
                        </div>

                        <div class="flex space-x-4 pt-4">
                            <button type="button" id="back-to-icon-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200">
                                Back
                            </button>
                            <button type="submit" id="finish-setup-btn" class="flex-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                                Finish Setup
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Home Page -->
        <div id="home-page" class="hidden flex flex-col items-center justify-center min-h-screen p-8">
            <div class="max-w-4xl mx-auto text-center">
                <h1 class="text-6xl font-bold mb-6 bg-gradient-to-r from-blue-500 to-green-500 bg-clip-text text-transparent">
                    Index Media Server
                </h1>
                <p class="text-xl text-gray-300 mb-8 leading-relaxed">
                    Your media server is running! Use the connect code below to stream content from other devices on the same network.
                </p>

                <!-- Connect Code Section -->
                <div class="bg-gray-700 border border-gray-500 rounded-lg p-6 mb-8">
                    <h2 class="text-2xl font-semibold text-white mb-4">Connect Code</h2>
                    <div class="bg-gray-800 border border-gray-600 rounded-lg p-4 mb-4">
                        <code id="connect-code" class="text-3xl font-mono text-green-400"></code>
                    </div>
                    <p class="text-gray-400 text-sm mb-4">Share this code with devices on the same WiFi network to access your media server</p>
                    
                    <!-- Streaming Link -->
                    <div class="text-center">
                        <button id="start-streaming-link" class="text-blue-400 hover:text-blue-300 underline transition-colors text-sm">
                            Start streaming from this device
                        </button>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <!-- Manage Indexes Button -->
                    <button id="manage-indexes-btn" class="bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white font-semibold py-4 px-6 rounded-lg text-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                        <svg class="w-6 h-6 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                        </svg>
                        Manage Indexes
                    </button>

                    <!-- Manage Profiles Button -->
                    <button id="manage-profiles-btn" class="bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white font-semibold py-4 px-6 rounded-lg text-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                        <svg class="w-6 h-6 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        Manage Profiles
                    </button>

                    <!-- Server Settings Button -->
                    <button id="server-settings-btn" class="bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white font-semibold py-4 px-6 rounded-lg text-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                        <svg class="w-6 h-6 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                        Server Settings
                    </button>
                </div>

                <!-- Status Information -->
                <div class="bg-gray-700 border border-gray-500 rounded-lg p-4">
                    <div class="flex items-center justify-center">
                        <div class="w-3 h-3 bg-green-400 rounded-full mr-3"></div>
                        <span class="text-gray-300">Server is running and ready to accept connections</span>
                    </div>
                </div>
            </div>
        </div>
        <!-- Server Settings Page -->
        <div id="server-settings-page" class="hidden flex flex-col items-center justify-center min-h-screen p-8">
            <div class="max-w-4xl mx-auto text-center">
                <h1 class="text-6xl/[1.1] font-bold mb-6 bg-gradient-to-r from-blue-500 to-green-500 bg-clip-text text-transparent">
                    Server Settings
                </h1>
                <p class="text-xl text-gray-300 mb-8 leading-relaxed">
                    Manage your server configuration and security settings.
                </p>

                <!-- Settings Cards Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <!-- Current Server Name Display -->
                    <div class="bg-gray-700 border border-gray-500 rounded-lg p-6">
                        <h2 class="text-2xl font-semibold text-white mb-4">Server Name</h2>
                        
                        <!-- Display Mode -->
                        <div id="server-name-display" class="mb-6">
                            <div class="bg-gray-800 border border-gray-600 rounded-lg p-4 mb-4">
                                <span id="current-server-name" class="text-xl text-gray-300">Loading...</span>
                            </div>
                            <button type="button" id="update-name-btn" class="w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-4 px-6 rounded-lg text-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                                <svg class="w-6 h-6 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                                Update Server Name
                            </button>
                        </div>

                        <!-- Edit Mode (Hidden Initially) -->
                        <div id="server-name-edit" class="hidden mb-6">
                            <div class="bg-gray-800 border border-gray-600 rounded-lg p-4 mb-4">
                                <input type="text" id="server-name-input" name="server-name" placeholder="Enter server name" 
                                       class="w-full bg-transparent text-xl text-gray-300 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            </div>
                            <div class="flex space-x-4">
                                <button type="button" id="cancel-name-update-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-4 px-6 rounded-lg text-lg transition-all duration-200">
                                    Cancel
                                </button>
                                <button type="button" id="save-name-btn" class="flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-4 px-6 rounded-lg text-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                                    Save Name
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Password Management -->
                    <div class="bg-gray-700 border border-gray-500 rounded-lg p-6">
                        <h2 class="text-2xl font-semibold text-white mb-4">Password</h2>
                        
                        <!-- Display Mode -->
                        <div id="password-display" class="mb-6">
                            <div class="bg-gray-800 border border-gray-600 rounded-lg p-4 mb-4">
                                <p class="text-gray-400 text-sm">Change your server password to keep your media secure</p>
                            </div>
                            <button type="button" id="update-password-btn" class="w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold py-4 px-6 rounded-lg text-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                                <svg class="w-6 h-6 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                </svg>
                                Update Password
                            </button>
                        </div>

                        <!-- Edit Mode (Hidden Initially) -->
                        <div id="password-edit" class="hidden mb-6">
                            <div class="bg-gray-800 border border-gray-600 rounded-lg p-4 mb-4">
                                <input type="password" id="server-password-input" name="server-password" placeholder="Enter new password" 
                                       class="w-full bg-transparent text-xl text-gray-300 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent mb-3" required>
                                <input type="password" id="confirm-password-input" name="confirm-password" placeholder="Confirm new password" 
                                       class="w-full bg-transparent text-xl text-gray-300 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                            </div>
                            <div class="flex space-x-4">
                                <button type="button" id="cancel-password-update-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-4 px-6 rounded-lg text-lg transition-all duration-200">
                                    Cancel
                                </button>
                                <button type="button" id="save-password-btn" class="flex-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold py-4 px-6 rounded-lg text-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                                    Save Password
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Error/Success Message -->
                <div id="server-settings-error" class="text-red-400 text-lg text-center hidden mb-6"></div>

                <!-- Back Button -->
                <div class="pt-6">
                    <button type="button" id="server-settings-back-btn" class="bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white font-semibold py-4 px-8 rounded-lg text-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                        <svg class="w-6 h-6 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                        Back to Home
                    </button>
                </div>
            </div>
        </div>
        <!-- Manage Profiles Page -->
        <div id="manage-profiles-page" class="hidden flex flex-col items-center justify-center min-h-screen p-8">
            <div class="w-full max-w-4xl mx-auto text-center">
                <h1 class="text-6xl/[1.1] font-bold mb-6 bg-gradient-to-r from-blue-500 to-green-500 bg-clip-text text-transparent">
                    Manage Profiles
                </h1>
                <p class="text-xl text-gray-300 mb-8 leading-relaxed">
                    Create and manage user profiles for your media server.
                </p>

                <!-- Profiles List -->
                <div class="bg-gray-700 border border-gray-500 rounded-lg p-6 mb-8">
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 space-y-4 sm:space-y-0">
                        <h2 class="text-2xl font-semibold text-white">Your Profiles</h2>
                        <button id="manage-add-profile-btn" class="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-6 rounded-lg text-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                            <svg class="w-6 h-6 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            Add Profile
                        </button>
                    </div>
                    
                    <!-- Profiles Grid -->
                    <div id="profiles-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <!-- Profiles will be dynamically added here -->
                    </div>
                    
                    <!-- Empty State -->
                    <div id="profiles-empty-state" class="text-center py-12 hidden">
                        <svg class="w-16 h-16 mx-auto text-gray-500 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        <p class="text-gray-400 text-lg">No profiles created yet</p>
                        <p class="text-gray-500 text-sm mt-2">Click "Add Profile" to create your first profile</p>
                    </div>
                </div>

                <!-- Error/Success Message -->
                <div id="manage-profiles-error" class="text-red-400 text-lg text-center hidden mb-6"></div>
                <div id="manage-profiles-success" class="text-green-400 text-lg text-center hidden mb-6"></div>

                <!-- Back Button -->
                <div class="pt-6">
                    <button type="button" id="profiles-back-btn" class="bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white font-semibold py-4 px-8 rounded-lg text-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                        <svg class="w-6 h-6 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                        Back to Home
                    </button>
                </div>
            </div>
        </div>

        <!-- Manage Indexes Page -->
        <div id="manage-indexes-page" class="hidden flex flex-col items-center justify-center min-h-screen p-8">
            <div class="w-full max-w-4xl mx-auto text-center">
                <h1 class="text-6xl/[1.1] font-bold mb-6 bg-gradient-to-r from-blue-500 to-green-500 bg-clip-text text-transparent">
                    Manage Indexes
                </h1>
                <p class="text-xl text-gray-300 mb-8 leading-relaxed">
                    Create and manage media indexes for your server.
                </p>

                <!-- Indexes List -->
                <div class="bg-gray-700 border border-gray-500 rounded-lg p-6 mb-8">
                    <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6 space-y-4 md:space-y-0">
                        <h2 class="text-2xl font-semibold text-white">Your Indexes</h2>
                        <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 sm:mx-auto md:mx-0">
                            <button id="manage-add-local-index-btn" class="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-6 rounded-lg text-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                                <svg class="w-6 h-6 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                </svg>
                                Add Local Index
                            </button>
                            <button id="manage-add-plugin-index-btn" class="bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-semibold py-3 px-6 rounded-lg text-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                                <svg class="w-6 h-6 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path>
                                </svg>
                                Add Plugin Index
                            </button>
                        </div>
                    </div>
                    
                    <!-- Indexes Grid -->
                    <div id="indexes-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <!-- Indexes will be dynamically added here -->
                    </div>
                    
                    <!-- Empty State -->
                    <div id="indexes-empty-state" class="text-center py-12 hidden">
                        <svg class="w-16 h-16 mx-auto text-gray-500 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                        </svg>
                        <p class="text-gray-400 text-lg">No indexes created yet</p>
                        <p class="text-gray-500 text-sm mt-2">Click "Add Local Index" to create your first index</p>
                    </div>
                </div>

                <!-- Error/Success Message -->
                <div id="manage-indexes-error" class="text-red-400 text-lg text-center hidden mb-6"></div>
                <div id="manage-indexes-success" class="text-green-400 text-lg text-center hidden mb-6"></div>

                <!-- Back Button -->
                <div class="pt-6">
                    <button type="button" id="indexes-back-btn" class="bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white font-semibold py-4 px-8 rounded-lg text-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                        <svg class="w-6 h-6 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                        Back to Home
                    </button>
                </div>
            </div>
        </div>

        <!-- Add Index Modal -->
        <div id="add-index-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-gray-800 border border-gray-500 rounded-lg p-8 max-w-md w-full mx-4">
                <h3 class="text-2xl font-bold text-white mb-6">Add Local Index</h3>
                
                <!-- Step 1: Name and Media Type -->
                <div id="add-index-step-1" class="space-y-6">
                    <div class="text-left">
                        <label for="add-index-name" class="block text-sm font-medium text-gray-300 mb-2">Index Name</label>
                        <input type="text" id="add-index-name" name="index-name" placeholder="Enter index name" 
                               class="w-full px-4 py-3 bg-gray-700 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>

                    <div class="text-left">
                        <label for="add-index-media-type" class="block text-sm font-medium text-gray-300 mb-3">Media Type</label>
                        <div class="grid grid-cols-3 gap-4 mb-4">
                            <!-- Videos -->
                            <div class="media-type-option" data-type="videos">
                                <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl flex items-center justify-center border-2 border-transparent hover:border-white hover:from-blue-500 hover:to-blue-600 cursor-pointer bg-origin-border hover:scale-105">
                                    <img src="./images/icon_movie.svg" alt="Videos" class="w-10 h-10">
                                </div>
                                <p class="text-sm text-gray-300 mt-2 text-center">Videos</p>
                            </div>
                            <!-- Audio -->
                            <div class="media-type-option" data-type="audio">
                                <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-green-600 to-green-700 rounded-xl flex items-center justify-center border-2 border-transparent hover:border-white hover:from-green-500 hover:to-green-600 cursor-pointer bg-origin-border hover:scale-105">
                                    <img src="./images/icon_music.svg" alt="Music Icon" class="w-10 h-10">
                                </div>
                                <p class="text-sm text-gray-300 mt-2 text-center">Audio</p>
                            </div>
                            <!-- Photos -->
                            <div class="media-type-option" data-type="photos">
                                <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl flex items-center justify-center border-2 border-transparent hover:border-white hover:from-purple-500 hover:to-purple-600 cursor-pointer bg-origin-border hover:scale-105">
                                    <img src="./images/icon_image.svg" alt="Photos" class="w-10 h-10">
                                </div>
                                <p class="text-sm text-gray-300 mt-2 text-center">Photos</p>
                            </div>
                        </div>
                    </div>

                    <div class="flex space-x-4 pt-4">
                        <button type="button" id="add-index-cancel-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200">
                            Cancel
                        </button>
                        <button type="button" id="add-index-continue-to-icon-btn" class="flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                            Continue
                        </button>
                    </div>
                </div>

                <!-- Step 2: Icon Selection -->
                <div id="add-index-step-2" class="hidden space-y-6">
                    <div class="text-left">
                        <label for="add-index-icon" class="block text-sm font-medium text-gray-300 mb-3">Choose Icon</label>
                        <div class="grid grid-cols-5 gap-4 mb-4">
                            <!-- Default Icons -->
                            <div class="icon-option" data-icon="home">
                                <div class="w-16 h-16 mx-auto bg-gradient-to-r from-slate-600 to-slate-700 rounded-xl flex items-center justify-center cursor-pointer hover:from-slate-500 hover:to-slate-600 transition-all duration-200 border-2 border-transparent hover:border-white bg-origin-border hover:scale-105">
                                    <img src="./images/icon_home.svg" alt="Home Icon" class="w-8 h-8">
                                </div>
                            </div>
                            <div class="icon-option" data-icon="movie">
                                <div class="w-16 h-16 mx-auto bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl flex items-center justify-center cursor-pointer hover:from-blue-500 hover:to-blue-600 transition-all duration-200 border-2 border-transparent hover:border-white bg-origin-border hover:scale-105">
                                    <img src="./images/icon_movie.svg" alt="Movie Icon" class="w-8 h-8">
                                </div>
                            </div>
                            <div class="icon-option" data-icon="music">
                                <div class="w-16 h-16 mx-auto bg-gradient-to-r from-green-600 to-green-700 rounded-xl flex items-center justify-center cursor-pointer hover:from-green-500 hover:to-green-600 transition-all duration-200 border-2 border-transparent hover:border-white bg-origin-border hover:scale-105">
                                    <img src="./images/icon_music.svg" alt="Music Icon" class="w-8 h-8">
                                </div>
                            </div>
                            <div class="icon-option" data-icon="image">
                                <div class="w-16 h-16 mx-auto bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl flex items-center justify-center cursor-pointer hover:from-purple-500 hover:to-purple-600 transition-all duration-200 border-2 border-transparent hover:border-white bg-origin-border hover:scale-105">
                                    <img src="./images/icon_image.svg" alt="Image Icon" class="w-8 h-8">
                                </div>
                            </div>
                            
                            <!-- Custom Upload Option -->
                            <div class="icon-option" data-icon="custom">
                                <div id="add-custom-icon-preview" class="w-16 h-16 mx-auto rounded-lg border-2 border-dashed border-gray-400 hover:border-white cursor-pointer flex items-center justify-center bg-gray-700 hover:bg-gray-600 transition-colors hover:scale-105 overflow-hidden">
                                    <div class="w-full h-full flex items-center justify-center">
                                        <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                                        </svg>
                                    </div>
                                </div>
                                <p class="text-xs text-gray-400 mt-2 text-center">Upload</p>
                            </div>
                        </div>
                        
                        <!-- Hidden file input -->
                        <input type="file" id="add-custom-icon" name="custom-icon" accept="image/*" class="hidden">
                    </div>

                    <div class="flex space-x-4 pt-4">
                        <button type="button" id="add-index-back-to-name-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200">
                            Back
                        </button>
                        <button type="button" id="add-index-continue-to-folders-btn" class="flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                            Continue
                        </button>
                    </div>
                </div>

                <!-- Step 3: Folder Selection -->
                <div id="add-index-step-3" class="hidden space-y-6">
                    <div class="text-left">
                        <label class="block text-sm font-medium text-gray-300 mb-3">Selected Folders</label>
                        
                        <!-- Selected Folders List -->
                        <div id="add-index-selected-folders-list" class="space-y-2 mb-4 min-h-[100px] border border-gray-500 rounded-lg p-4 bg-gray-700">
                            <p class="text-gray-500 text-sm text-center py-8">No folders selected yet</p>
                        </div>
                        
                        <!-- Add Folders Button -->
                        <button type="button" id="add-index-add-folders-btn" class="w-full bg-gray-600 hover:bg-gray-500 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 border-2 border-dashed border-gray-400 hover:border-gray-300">
                            <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            Add Folders
                        </button>
                    </div>

                    <div class="flex space-x-4 pt-4">
                        <button type="button" id="add-index-back-to-icon-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200">
                            Back
                        </button>
                        <button type="button" id="add-index-save-btn" class="flex-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                            Create Index
                        </button>
                    </div>
                </div>

                <!-- Error Message -->
                <div id="add-index-error" class="text-red-400 text-sm text-center hidden mt-4"></div>
            </div>
        </div>

        <!-- Update Index Modal -->
        <div id="update-index-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-gray-800 border border-gray-500 rounded-lg p-8 max-w-md w-full mx-4">
                <h3 class="text-2xl font-bold text-white mb-6">Update Index</h3>
                
                <!-- Error Message -->
                <div id="update-index-error" class="text-red-400 text-sm text-center hidden mb-4"></div>
                
                <!-- Main View -->
                <div id="update-index-view-main" class="space-y-6">
                    <div class="text-left">
                        <h4 class="text-lg font-semibold text-white mb-4">Index Information</h4>
                        <div class="bg-gray-700 border border-gray-500 rounded-lg p-4 space-y-3">
                            <div class="flex items-center space-x-3">
                                <div id="update-index-icon-display" class="w-8 h-8 flex items-center justify-center flex-shrink-0">
                                    <!-- Icon will be populated here -->
                                </div>
                                <div>
                                    <p class="text-white font-medium" id="update-index-name-display">Index Name</p>
                                    <p class="text-gray-400 text-sm" id="update-index-media-type-display">Media Type</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
                                </svg>
                                <span class="text-gray-300 text-sm" id="update-index-folders-count">0 folders</span>
                            </div>
                        </div>
                    </div>

                    <div class="text-left">
                        <h4 class="text-lg font-semibold text-white mb-4">What would you like to update?</h4>
                        <div class="space-y-3">
                            <button type="button" id="update-index-name-btn" class="w-full bg-gray-600 hover:bg-gray-500 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 text-left">
                                <svg class="w-5 h-5 inline mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                                Update Name
                            </button>
                            <button type="button" id="update-index-icon-btn" class="w-full bg-gray-600 hover:bg-gray-500 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 text-left">
                                <svg class="w-5 h-5 inline mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"></path>
                                </svg>
                                Update Icon
                            </button>
                            <button type="button" id="update-index-folders-btn" class="w-full bg-gray-600 hover:bg-gray-500 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 text-left">
                                <svg class="w-5 h-5 inline mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
                                </svg>
                                Update Source Folders
                            </button>
                        </div>
                    </div>

                    <div class="flex space-x-4 pt-4">
                        <button type="button" id="update-index-cancel-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200">
                            Cancel
                        </button>
                        <button type="button" id="update-index-save-btn" class="flex-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                            Save Changes
                        </button>
                    </div>
                </div>

                <!-- Name Edit View -->
                <div id="update-index-view-name" class="hidden space-y-6">
                    <div class="text-left">
                        <label for="update-index-name-input" class="block text-sm font-medium text-gray-300 mb-2">Index Name</label>
                        <input type="text" id="update-index-name-input" name="index-name" placeholder="Enter index name" 
                               class="w-full px-4 py-3 bg-gray-700 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>

                    <div class="flex space-x-4 pt-4">
                        <button type="button" id="update-index-back-from-name-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200">
                            Back
                        </button>
                    </div>
                </div>

                <!-- Icon Edit View -->
                <div id="update-index-view-icon" class="hidden space-y-6">
                    <div class="text-left">
                        <label for="update-index-icon" class="block text-sm font-medium text-gray-300 mb-3">Choose Icon</label>
                        <div class="grid grid-cols-5 gap-4 mb-4">
                            <!-- Default Icons -->
                            <div class="icon-option" data-icon="home">
                                <div class="w-16 h-16 mx-auto bg-gradient-to-r from-slate-600 to-slate-700 rounded-xl flex items-center justify-center cursor-pointer hover:from-slate-500 hover:to-slate-600 transition-all duration-200 border-2 border-transparent hover:border-white bg-origin-border hover:scale-105">
                                    <img src="./images/icon_home.svg" alt="Home Icon" class="w-8 h-8">
                                </div>
                            </div>
                            <div class="icon-option" data-icon="movie">
                                <div class="w-16 h-16 mx-auto bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl flex items-center justify-center cursor-pointer hover:from-blue-500 hover:to-blue-600 transition-all duration-200 border-2 border-transparent hover:border-white bg-origin-border hover:scale-105">
                                    <img src="./images/icon_movie.svg" alt="Movie Icon" class="w-8 h-8">
                                </div>
                            </div>
                            <div class="icon-option" data-icon="music">
                                <div class="w-16 h-16 mx-auto bg-gradient-to-r from-green-600 to-green-700 rounded-xl flex items-center justify-center cursor-pointer hover:from-green-500 hover:to-green-600 transition-all duration-200 border-2 border-transparent hover:border-white bg-origin-border hover:scale-105">
                                    <img src="./images/icon_music.svg" alt="Music Icon" class="w-8 h-8">
                                </div>
                            </div>
                            <div class="icon-option" data-icon="image">
                                <div class="w-16 h-16 mx-auto bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl flex items-center justify-center cursor-pointer hover:from-purple-500 hover:to-purple-600 transition-all duration-200 border-2 border-transparent hover:border-white bg-origin-border hover:scale-105">
                                    <img src="./images/icon_image.svg" alt="Image Icon" class="w-8 h-8">
                                </div>
                            </div>
                            
                            <!-- Custom Upload Option -->
                            <div class="icon-option" data-icon="custom">
                                <div id="update-custom-icon-preview" class="w-16 h-16 mx-auto rounded-lg border-2 border-dashed border-gray-400 hover:border-white cursor-pointer flex items-center justify-center bg-gray-700 hover:bg-gray-600 transition-colors hover:scale-105 overflow-hidden">
                                    <div class="w-full h-full flex items-center justify-center">
                                        <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                                        </svg>
                                    </div>
                                </div>
                                <p class="text-xs text-gray-400 mt-2 text-center">Upload</p>
                            </div>
                        </div>
                        
                        <!-- Hidden file input -->
                        <input type="file" id="update-custom-icon" name="custom-icon" accept="image/*" class="hidden">
                    </div>

                    <div class="flex space-x-4 pt-4">
                        <button type="button" id="update-index-back-from-icon-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200">
                            Back
                        </button>
                    </div>
                </div>

                <!-- Folders Edit View -->
                <div id="update-index-view-folders" class="hidden space-y-6">
                    <div class="text-left">
                        <label class="block text-sm font-medium text-gray-300 mb-3">Selected Folders</label>
                        
                        <!-- Selected Folders List -->
                        <div id="update-index-selected-folders-list" class="space-y-2 mb-4 min-h-[100px] border border-gray-500 rounded-lg p-4 bg-gray-700">
                            <p class="text-gray-500 text-sm text-center py-8">No folders selected yet</p>
                        </div>
                        
                        <!-- Add Folders Button -->
                        <button type="button" id="update-index-add-folders-btn" class="w-full bg-gray-600 hover:bg-gray-500 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 border-2 border-dashed border-gray-400 hover:border-gray-300">
                            <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            Add Folders
                        </button>
                    </div>

                    <div class="flex space-x-4 pt-4">
                        <button type="button" id="update-index-back-from-folders-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200">
                            Back
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Plugin Coming Soon Modal -->
        <div id="plugin-coming-soon-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-gray-800 border border-gray-500 rounded-lg p-8 max-w-md w-full mx-4">
                <h3 class="text-2xl font-bold text-white mb-6">Plugin Indexes Coming Soon</h3>
                <div class="text-center">
                    <svg class="w-16 h-16 mx-auto text-purple-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path>
                    </svg>
                    <p class="text-gray-300 text-lg mb-4">Plugin-based indexes are not yet available.</p>
                    <p class="text-gray-400 text-sm mb-6">This feature will allow you to connect to media managed by third-party services.</p>
                    <button type="button" id="plugin-coming-soon-close-btn" class="bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                        Got it!
                    </button>
                </div>
            </div>
        </div>

        <!-- Profile Modal -->
        <div id="profile-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-gray-800 border border-gray-500 rounded-lg p-8 max-w-md w-full mx-4">
                <h3 id="profile-modal-title" class="text-2xl font-bold text-white mb-6">Add Profile</h3>
                
                <form id="profile-form" class="space-y-6">
                    <div class="text-left">
                        <label for="profile-name" class="block text-sm font-medium text-gray-300 mb-2">Profile Name</label>
                        <input type="text" id="profile-name" name="profile-name" placeholder="Enter profile name" 
                               class="w-full px-4 py-3 bg-gray-700 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>

                    <div class="text-left">
                        <label for="profile-color" class="block text-sm font-medium text-gray-300 mb-2">Profile Color</label>
                        <div class="flex items-center space-x-4">
                            <input type="color" id="profile-color" name="profile-color" value="#00C700" 
                                   class="w-16 h-12 bg-gray-700 border border-gray-500 rounded-lg cursor-pointer">
                            <input type="text" id="profile-color-text" placeholder="#00C700" 
                                   class="flex-1 px-4 py-3 bg-gray-700 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>

                    <div class="flex space-x-4 pt-4">
                        <button type="button" id="profile-cancel-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200">
                            Cancel
                        </button>
                        <button type="submit" id="profile-save-btn" class="flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                            Save Profile
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
